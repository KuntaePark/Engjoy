<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{fragment/default}">

<th:block layout:fragment="css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</th:block>

<th:block layout:fragment="script">
    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', () => {
            const swiper = new Swiper('.swiper', {
                loop: true,
                slidesPerView: 1,       // 한 번에 보이는 슬라이드 개수
                slidesPerGroup: 1,      // 한 번에 넘어가는 슬라이드 개수
                spaceBetween: 0,        // 슬라이드 사이 간격
                navigation: {
                  prevEl: '#prevBtn',
                  nextEl: '#nextBtn',
                },
              });

            const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  // 뷰포트에 보이기 시작하면 애니메이션 클래스 추가
                  entry.target.classList.add('opacity-100', 'translate-y-0');
                  entry.target.classList.remove('opacity-0', 'translate-y-8');
                } else {
                  // 뷰포트에서 나가면 다시 숨김 상태로 리셋
                  entry.target.classList.add('opacity-0', 'translate-y-8');
                  entry.target.classList.remove('opacity-100', 'translate-y-0');
                }
              });
            }, { threshold: 0.2 });

            document.querySelectorAll('.feature').forEach(el => {
              // 초기 상태 세팅 (페이지 로드 시에도 숨겨진 상태로)
              el.classList.add('opacity-0', 'translate-y-8', 'transition', 'duration-700');
              observer.observe(el);
            });
        });
    </script>
</th:block>


<th:block layout:fragment="main">

    <section class="bg-cover bg-center bg-no-repeat"
             th:style="|background-image: url('@{/images/background.png}');|">
        <div class="max-w-screen-xl lg:max-w-screen-2xl mx-auto flex flex-col-reverse md:flex-row items-center justify-center gap-x-4 min-h-screen px-6 py-12 overflow-x-hidden">
            <div class="md:w-1/2 text-gray-800 space-y-8">
                <h1 class="text-5xl font-bold leading-[5rem]">
                    외위지 말고,플레이하세요!<br/>
                    당신의 영어는 게임속에 있습니다.
                </h1>
                <p class="text-gray-500 text-2xl font-medium">영어 공부, 아직도 외우니? 난 사냥해!</p>
                <button class="bg-green-600 hover:bg-green-500 text-white font-bold px-6 py-3 rounded-full transition">
                    게임바로가기
                </button>

                <!-- space-y-6 덕분에 위 요소들과 1.5rem 간격 -->
                <div class="flex gap-4">
                    <button id="prevBtn" class="text-3xl w-12 h-12 text-gray-800">‹</button>
                    <button id="nextBtn" class="text-3xl w-12 h-12 text-gray-800">›</button>
                </div>
            </div>

            <!-- 슬라이더 -->
            <div class="md:w-1/2 flex justify-center relative">
                <div class="relative w-[500px] h-[500px]">
                    <div class="absolute inset-0 flex items-center justify-end">
                        <div class="swiper w-full h-full">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide flex items-center justify-center !w-full flex-shrink-0">
                                    <img th:src="@{/images/slide1.png}" alt="슬라이드1" class="max-w-full max-h-full"/>
                                </div>
                                <div class="swiper-slide flex items-center justify-center !w-full flex-shrink-0">
                                    <img th:src="@{/images/slide2.png}" alt="슬라이드2" class="max-w-full max-h-full"/>
                                </div>
                                <div class="swiper-slide flex items-center justify-center !w-full flex-shrink-0">
                                    <img th:src="@{/images/slide3.png}" alt="슬라이드3" class="max-w-full max-h-full"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section id="features" class="py-16 bg-[#f1fce5] ">
        <div class="max-w-6xl mx-auto px-6">
            <!-- 타이틀 -->
            <h2 class="text-3xl font-bold text-gray-800 text-center mb-12">
                즐겁게 학습하고 또 반복합니다
            </h2>
            <!-- 두 개의 카드 박스 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-16">
                <!-- 카드 하나에 공통 class="feature" -->
                <div class="feature bg-white rounded-xl p-6 opacity-0 translate-y-8 transition duration-700 min-h-[480px]">
                    <!-- 왼쪽 카드 내용 -->
                    <h3 class="text-xl font-semibold mb-4">카드형태로 학습</h3>
                    <!-- 예시 모바일 UI 이미지는 <img>나 <div> 배경으로 -->
                    <img th:src="@{/images/expression.png}" alt="암기화면" class="w-full rounded-lg shadow" />
                </div>
                <div class="feature bg-white rounded-xl p-6 opacity-0 translate-y-8 transition duration-700 delay-200 min-h-[480px]">
                    <!-- 오른쪽 카드 내용 -->
                    <h3 class="text-xl font-semibold mb-4">단어와 문장퀴즈로 복습</h3>
                    <img th:src="@{/images/slide3.png}" alt="문장화면" class="w-full rounded-lg shadow" />
                </div>
            </div>
        </div>
    </section>
</th:block>
</html>